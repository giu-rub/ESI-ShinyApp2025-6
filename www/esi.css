:root{
  --left-col-width: 42ch;  /* match .story-column max-width */
  --left-col-gap: 2rem;    /* match your wrap gap/padding */
}


/* Make all media in right panes responsive and centered */
.sticky-pane img,
.sticky-pane video {
  display: block;
  max-width: 100%;
  max-height: 80vh;          /* don't overflow viewport */
  width: auto;
  height: auto;
  object-fit: contain;        /* keep aspect ratio, no cropping */
  margin: 0 auto;
}

/* Optional: for a bit more space below on mobile */
@media (max-width: 768px) {
  .sticky-pane img,
  .sticky-pane video {
    max-height: 60vh;
  }
}

/* --- Global / layout --- */
body { font-family: 'Lato', sans-serif; padding-top: 72px; background: #f9f5f1; }
.section { padding: 0; position: relative; z-index: 1;}
.section + .section { border-top: 1px solid #f9f5f1; background: #f9f5f1;  }
.section h3 { font-weight: 700; text-align: center;}
.sidebar { position: sticky; top: 1rem; }
@media (max-width: 991.98px) { .sidebar { position: static; } }

/* --- Navbar --- */
.navbar-brand { font-weight: 700;color:#000; }
.navbar-logo { height: 36px; width: auto; }
@media (max-width: 575.98px) { .navbar-logo { height: 28px; } }

/* --- Background video stays behind & non-interactive --- */
#background-video { pointer-events: none; z-index: -1; }

/* --- Images: never distort; scale nicely --- */
img { max-width: 100%; height: relative; }
img.responsive-graphic { width: 100%; max-width: 900px; height: auto; object-fit: contain; }
img.download-preview   { width: 100%; max-width: 520px; height: auto; object-fit: contain; }

/* Optional utilities if you ever need fixed-height crops */
.img-fit-contain { width: 100%; height: 320px; object-fit: contain; }
.img-fit-cover   { width: 100%; height: 320px; object-fit: cover; }

/* --- Text / misc --- */
.disclaimer { font-size: 1rem; color: #000; }
.map-notes li + li { margin-top: 0.5rem; }
.map-downloads .btn { min-width: 140px; }

/* --- Scroll areas --- */
.data-scroll { max-height: 420px; overflow-y: auto; }

/* --- Downloads card --- */
.download-card { max-width: 420px; margin: 0 auto; }

/* --- Leaflet map sizing fallback (UI should still set explicit height) --- */
.leaflet-container { min-height: 480px; }

/* --- DataTables (DT) reliability + responsiveness --- */
.dataTables_wrapper .dataTables_scrollBody { overflow-x: auto !important; }
table.dataTable { width: 100% !important; }
table.dataTable th, table.dataTable td { white-space: nowrap; }
@media (max-width: 767.98px) {
  table.dataTable th, table.dataTable td { white-space: normal; }
}

/* --- Responsive navbar logo --- */
.navbar-logo {
  height: 40px;
  width: auto;
  max-width: 100%;
  display: block;
  object-fit: contain;
}
.navbar .nav-link {
  color: #000;
  text-decoration: none;
  transition: color 0.2s ease;
  padding: 0 1.5rem !important;
}
.navbar .nav-link:hover,
.navbar .nav-link:focus { color: #6ac0ed; text-decoration: none; }
.navbar .nav-link.active { color: #6ac0ed; font-weight: 600; }

/* Adjust size on tablets */
@media (max-width: 992px) { .navbar-logo { height: 32px; } }
/* Adjust size on phones */
@media (max-width: 576px) { .navbar-logo { height: 26px; } }

/* Keep the right logo vertically centered and tidy */
.navbar .navbar-brand.m-0.p-0 {
  display: flex; align-items: center; justify-content: center;
}

.download-preview {
  max-width: 500px; width: 100%; height: auto;
  border-radius: 0.75rem; box-shadow: 0 rgba(0, 0, 0, 0.1);
}

/* Grid layout for download items */
.download-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem; justify-items: center; align-items: start; padding: 0;
  background-color: #f7f4ef;
}

/* Card styling */
.download-card {
  position: relative; display: flex; flex-direction: column; align-items: center;
  text-decoration: none; color: inherit; background-color: #fff;
  border-radius: 16px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  overflow: hidden; width: 100%; max-width: 320px;
}
.download-card img { width: 100%; height: auto; display: block; border-radius: 0; }
.download-card:hover, .download-card:focus {
  transform: translateY(-5px); box-shadow: 0 8px 16px rgba(0,0,0,0.15);
}
.download-ribbon {
  position: absolute; top: 10px; left: 10px; background-color: #0072ce; color: #fff;
  font-weight: 600; padding: 0.3rem 0.7rem; border-radius: 6px; font-size: 0.85rem;
}
.download-badge { margin: 1rem 0; font-weight: 600; color: #0072ce; text-transform: uppercase; letter-spacing: 0.05em; }

.download-preview { border-radius: 0.75rem; box-shadow: 0 0 0 rgba(0, 0, 0, 0.1); }
#downloads-section { background-color: #f7f4ef; }

.downloads-section {
  padding-top: 4rem;
  padding-bottom: 4rem;
}


.btn-map {
  background-color: #fff;
  color: #000;
  border: 1px solid #000;
  min-width: 140px;
  font-weight: 600;
  transition: all 0.2s ease-in-out;
}

.btn-map:hover {
  background-color: #000;
  color: #fff;
}


/* Mobile utility (downloads) */
@media (max-width: 768px) { .download-grid { grid-template-columns: 1fr; } }

/* ─────────────────────────────────────────────────────────────
   Scrollytelling layout
   ───────────────────────────────────────────────────────────── */

/* Make intro step easier to “hit” */
.story-step[data-step="intro"] {
  min-height: 130vh;
  padding-top: 6rem;
  display: block;
}

/* Wrapper no longer forces a two-column grid */
.storymap-wrap {
  display: block;
  padding: 1rem 1.5rem;
  box-sizing: border-box;
  position: relative;
}

/* Fixed sticky panes (ALL panes), cross-fading */
.sticky-pane {
  position: fixed;
  inset: 0;
  overflow: hidden;
  z-index: 0;               /* behind content */
  pointer-events: none;     /* disabled by default */
  opacity: 0;
  transition: opacity 280ms ease;
}
.sticky-pane.is-active {
  opacity: 1;
  pointer-events: auto;     /* enable interactivity when active */
}

/* Scene content flows from the TOP, offset to the RIGHT of left column */
.scene-frame {
  width: 100%;
  height: 100%;
  display: block;
  box-sizing: border-box;
  padding: 2rem;
  padding-left: calc(var(--left-col-width) + var(--left-col-gap));
}
.scene-frame > * {
  display: block;
  max-width: 95%;
  max-height: none;
  margin: 12rem 8rem auto;
}

/* Left narrative column stays on top */
.story-column {
  position: relative;
  z-index: 1;
  max-width: var(--left-col-width);
  padding-right: 1rem;
  background: transparent;
}

/* Steps control scroll pacing; top-align content */
.story-step {
  min-height: 200vh;
  display: block;
  padding: 2rem 0;
  box-sizing: border-box;
}

/* Optional visual cue for active step (no layout shift) */
.story-step.is-active {
  outline: none;
  box-shadow: none;
  transition: none;
}

/* Invisible spacer steps to control timing */
.story-step.on-ramp,
.story-step.off-ramp { min-height: 10vh; padding: 0; }  /* adjust 40–100vh to taste */
.story-step.on-ramp > *,
.story-step.off-ramp > * { display: none; }



/* Lower only Pane 2’s scene vertically 
.sticky-pane[data-pane="2"] .scene-frame {
  padding-top: 20vh; 
}  */

.sticky-pane[data-pane="2"].under-transition2 {
  z-index: -1;
  opacity: 0;
  transition: opacity 150ms ease; /* faster fade to hide the sliver */
  pointer-events: none;
}

/* Invisible trigger step for moving the “intro” activation */
.story-step.intro-trigger {
  min-height: 20vh;
  padding: 0;} 

.story-step.intro-trigger > * { display: none; } 

/* When Transition 3 is in view, push Pane 3 behind */
.sticky-pane[data-pane="3"].under-transition3 {
  opacity: 0;
  visibility: hidden;
  z-index: 0; /* push behind content immediately */
}


/* Responsive tweaks */
@media (max-width: 992px) {
  .scene-frame { padding-left: 1rem; }
  .story-column { max-width: 100%; padding-right: 0; }
  .story-step { min-height: 40vh; }
}

/*.esi-section-thirdpane {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
}*/

/* ─────────────────────────────────────────────────────────────
   Image rendering
   ───────────────────────────────────────────────────────────── */
   

   
/* ─────────────────────────────────────────────────────────────
   Background color of panes
   ───────────────────────────────────────────────────────────── */

/* Storymap 1: full-bleed background behind content */
.storymap-root[data-ns*="storymap"] {
  position: relative;
  overflow: visible;          /* allow ::before to extend beyond padding */
  background: none;
}

/* Full-width translucent background color (rgb 188, 138, 95) */
.storymap-root[data-ns*="storymap"]::before {
  content: "";
  position: absolute;
  top: 0;
  left: 50%;
  width: 100vw;              
  height: 100%;
  transform: translateX(-50%);
  background-color: rgba(249, 245, 241); 
  z-index: -1;                
  pointer-events: none;
}

/* Keep Storymap 1 content above the overlay */
.storymap-root[data-ns*="storymap"] > * {
  position: relative;
  z-index: 1;
}


/* Storymap 2: full-bleed background that stays behind content */
.storymap-root[data-ns*="storymap2"] {
  position: relative;
  overflow: visible;          
  background: none;
}

/* Storymap 2: full-bleed background that stays behind content */
.storymap-root[data-ns*="storymap3"] {
  position: relative;
  overflow: visible;          
  background: none;
}



/* Full-width translucent background color (rgb 134, 159, 176) */
.storymap-root[data-ns*="storymap2"]::before {
  content: "";
  position: absolute;
  top: 0;
  left: 50%;
  width: 100vw;               
  height: 100%;
  transform: translateX(-50%);
  background-color: rgba(249, 245, 241); 
  z-index: -1;               
  pointer-events: none;
}

/* Keep all child content above the overlay */
.storymap-root[data-ns*="storymap2"] > * {
  position: relative;
  z-index: 1;
}


/* ─────────────────────────────────────────────────────────────
   Transitions & footer 
   ───────────────────────────────────────────────────────────── */
.transition1-banner {
  background: linear-gradient(to bottom,#bc8a5f,#f9f5f1);
  height: 25vh; width: 100%;
}

.transition1b-banner {
  background: linear-gradient(to bottom,#bc8a5f,#f9f5f1);
  height: 25vh;
  width: 100%;
}

.transition1c-banner {
  background: linear-gradient(to bottom,#bc8a5f,#f9f5f1);
  height: 25vh;
  width: 100%;
}

/* Transition 2 */
.transition2-banner {
  position: relative;
  width: 100%;
  height: 50vh;
  overflow: hidden;
  z-index: 2;  
}
.transition2-banner .background-video {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  object-fit: cover;
  z-index: 1;          /* video below overlay text, above sticky panes when .under-transition2 is set */
  pointer-events: none;
    opacity: 0.90;
}
.transition2-overlay {
  position: relative;
  z-index: 3;          
  color: white;
  text-align: center;
  top: 50%;
  transform: translateY(-50%);
  padding: 1rem;
  text-shadow: 0 2px 8px rgba(0,0,0,0.6);
  font-size: clamp(1rem, 2.5vw, 2rem);
}
/* --- Transition 3 --- */
.transition3-banner {
  position: relative;
  width: 100%;
  height: 50vh;
  overflow: hidden;
  z-index: 2; 

  /* Background & spacing */
  margin-top: 2rem;          /* creates space above */
  background-color: #f9f5f1; /* fills any gap between sections */
}

/* Background video fills container */
.transition3-banner .background-video {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 1;
  pointer-events: none;
}

/* Centered overlay text */
.transition3-overlay {
  position: relative;
  z-index: 3;          
  color: white;
  text-align: center;
  top: 50%;
  transform: translateY(-50%);
  padding: 1rem;
  text-shadow: 0 2px 8px rgba(0,0,0,0.6);
  font-size: clamp(1rem, 2.5vw, 2rem);
}

/* Optional: if you ever hide pane 3 behind transition3 
.sticky-pane[data-pane="3"].under-transition3 {
  opacity: 0;
  visibility: hidden;
  z-index: 0;
  pointer-events: no*/

/* baseline */
.sticky-pane {
  position: sticky;
  top: 0;
  z-index: 10;
}

/* when Pane 3 is visible, Pane 4 falls behind */
.sticky-pane[data-pane="4"].under-prev-pane {
  z-index: 5;          /* lower than Pane 3 */
  opacity: 0.92;       /* optional, slight fade */
  /* pointer-events: none;  // optional if you want to disable interaction while behind */
}


/* Footer */
.footer-section {
  background-color: #E68059; color: #000; width: 100%; margin: 0;
  padding: 40px 0; min-height: 40vh; display: flex; align-items: center;
  justify-content: space-between; gap: 2rem;
}
.footer-left { flex: 1; padding-left: 5%; }
.footer-right { flex: 1; display: flex; justify-content: center; align-items: center; padding-right: 5%; }
.footer-image { max-width: 80%; height: auto; border-radius: 8px; }

.custom-icon {
  color: #fff !important; font-size: 26px; transition: color 0.3s ease, transform 0.3s ease;
}
.custom-icon:hover { color: #333; transform: scale(1.2); }

@media (max-width: 768px) {
  .footer-section { flex-direction: column; text-align: center; gap: 1rem; }
  .footer-left, .footer-right { flex: none; width: 100%; padding: 0 24px; }
}
